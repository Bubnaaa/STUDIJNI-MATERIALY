
### DTP Definice
- = Cisco proprietární protokol, který automaticky vyjednává trunking mezi dvěma zařízeními
- Funguje jen mezi Cisco switchemi - ostatní výrobci DTP nepodporují
- DTP běží jen point-to-point

### DTP příkazy
- Zapnutí trunku bez DTP
```
S1(config-if)# switchport mode trunk
S1(config-if)# switchport nonegotiate
```
- Port se stane trunkem ale neposílá DTP framy
- Nutné použít pokud druhé zařízení neumi DTP 
- Znovu zapnutí DTP:
```
S1(config-if)# switchport mode dynamic auto
```

### Módy DTP

```
Switch(config-if)# switchport mode { access | dynamic { auto | desirable } | trunk }
```

| Mód               | Popis                           | Vyjednávání | Výsledek                                    |
| ----------------- | ------------------------------- | ----------- | ------------------------------------------- |
| access            | Port patří do jedné VLAN        | Ne          | Access port                                 |
| trunk             | Port je vždy trunk              | Ne          | Trunk vždy aktivní                          |
| dynamic desirable | Aktivně se snaží vytvořit trunk | Ano         | Trunk, pokud druhá strana = trunk/desirable |
| dynamic auto      | Čeká na druhou stranu           | Ano         | Trunk, pokud druhá strana = trunk/desirable |
- **auto + auto = access** (nevznikne trunk!)
- **desirable + auto = trunk**
- **trunk + nonegotiate = trunk (bez DTP)**

### Ověření DTP
`show dtp interface fa0/1`