- Buduje topologii bez smyček ve čtyřech krocích. Ke komunikaci slouží framy BPDU které obsahují BID (Bridge ID)

### BID a jeho struktura
- BID určuje prioritu a identitu SW v STP procesu:
1. Bridge Priority (4b) - Výchozí hodnota je 32768. Rozsah je 0-61440 (kroky po 4096). Čím nižší, tím lepší.
2. Extended System ID (12b) - Obsahuje ID VLAN. Umožňuje aby STP běželo samostatně pro každnou VLAN (PVST+)
3. MAC adresa (48b) - Používá se jako poslední rozhodující faktor při shodě priority (Nižsí MAC adresa vyhrává)

### 4 kroky k topologii bez smyček
1. Volba Root Bridge
	- Po startu se každý SW prohlásí za Root Bridge a posílá BPDU
	- Jakmile SW přijme BPDU s nižším BID, aktualizuje své informace a uzná nového Root Bridge
	- Vítěz - SW s nejnižsím BID

2. Volba Root Portů
	- Každý SW si zvolí jeden Root Port
	- Je to port s nejnižším Internal Root Path Cost (součet cen linek k Rootu)
	- Cena portu dle IEEE:
		- 10 Mbps = 100
		- 100 Mbps = 19
		- 1 Gbps = 4
		- 10 Gbps = 2

3. Volba Designated Portů (DP)
	- Na každém segmentu (protpoji mezi SW) musí být jeden DP
	- Je to port s nejnižší cestou k Rootu na daném segmentu
	- Všechny porty na Root Bridge jsou automaticky DP
	
4. Volba Alternate (Blocked) Portů
	- Porty, které nejsou RP ani DP, se stavájí Alternate porty
	- Přepnou se do stavu Blocking/Discarding aby fyzicky rozpojily smyčku

### Tie-breaking
- Pokud má SW více cest se stejnou cenou, rozhoduje v tomto pořadí:
1. Lowest Sender BID - Vybere souseda s nižsím ID
2. Lowest Sender Port Priority - Pokud je stejný soused, vybere port připojený k portu s nižší prioritou
3. Lowest Sender Port ID - Poslední možnost - vybere port připojený k portu s nižším číslem rozhraní (F0/1)

### STP Timers
- Hello Timer (2s) - Interval mezi BPDU, lze měnit (1-10s)
- Forward Delay (15s) - Čas strávený v Listening a Learning stavu (celkem 30s)
- Max Age (20s) - Čas ve kterém SW prohlásí topologii za změněnou, pokud nepřivhází BPDU
